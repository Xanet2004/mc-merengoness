<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Merengoness ‚Äî Minecraft Server</title>

  <!-- (Opcional) Fuente moderna -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg0: #070A12;
      --bg1: #0A0F1F;
      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.62);
      --muted2: rgba(255,255,255,.45);
      --card: rgba(255,255,255,.06);
      --card2: rgba(255,255,255,.08);
      --border: rgba(255,255,255,.12);
      --border2: rgba(255,255,255,.18);
      --shadow: 0 18px 60px rgba(0,0,0,.55);
      --shadow2: 0 10px 30px rgba(0,0,0,.45);
      --radius: 18px;
      --radius2: 24px;
      --blur: 18px;
      --accent: #4DE3FF;
      --accent2: #7C5CFF;
      --good: rgba(77, 227, 255, .22);
      --bad: rgba(255, 110, 110, .22);
      --ok-border: rgba(77, 227, 255, .35);
      --bad-border: rgba(255, 110, 110, .35);
    }

    *{ box-sizing: border-box; }
    html, body{ height: 100%; }
    body{
      margin: 0;
      color: var(--text);
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      background: radial-gradient(1200px 800px at 15% 10%, rgba(124,92,255,.18), transparent 60%),
                  radial-gradient(1200px 800px at 85% 30%, rgba(77,227,255,.14), transparent 55%),
                  linear-gradient(180deg, var(--bg0), var(--bg1));
      overflow-x: hidden;
    }

    /* Fondo ‚Äúblobs‚Äù */
    .bg{
      position: fixed;
      inset: -200px;
      z-index: -1;
      pointer-events: none;
      filter: blur(45px) saturate(120%);
      opacity: .95;
    }
    .blob{
      position: absolute;
      width: 520px;
      height: 520px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 30%, rgba(77,227,255,.85), rgba(124,92,255,.35), transparent 68%);
      animation: float1 16s ease-in-out infinite;
      mix-blend-mode: screen;
    }
    .blob.b2{
      width: 620px; height: 620px;
      left: 65%; top: 5%;
      background: radial-gradient(circle at 35% 30%, rgba(124,92,255,.9), rgba(77,227,255,.25), transparent 70%);
      animation: float2 19s ease-in-out infinite;
    }
    .blob.b1{ left: 8%; top: 10%; }
    .blob.b3{
      width: 460px; height: 460px;
      left: 35%; top: 70%;
      background: radial-gradient(circle at 35% 30%, rgba(77,227,255,.7), rgba(124,92,255,.28), transparent 68%);
      animation: float3 18s ease-in-out infinite;
    }
    @keyframes float1{ 0%,100%{ transform: translate(0,0) scale(1); } 50%{ transform: translate(40px, -30px) scale(1.06);} }
    @keyframes float2{ 0%,100%{ transform: translate(0,0) scale(1); } 50%{ transform: translate(-35px, 30px) scale(1.04);} }
    @keyframes float3{ 0%,100%{ transform: translate(0,0) scale(1); } 50%{ transform: translate(30px, 20px) scale(1.08);} }

    .wrap{
      max-width: 1100px;
      margin: 0 auto;
      padding: 34px 18px 50px;
    }

    /* Hero */
    .hero{
      display: grid;
      grid-template-columns: 1.2fr .8fr;
      gap: 18px;
      align-items: center;
      margin-top: 10px;
    }
    @media (max-width: 900px){
      .hero{ grid-template-columns: 1fr; }
    }

    .brand{
      display: flex;
      align-items: center;
      gap: 14px;
      margin-bottom: 10px;
    }
    .mark{
      width: 44px; height: 44px;
      border-radius: 14px;
      background: linear-gradient(135deg, rgba(77,227,255,.35), rgba(124,92,255,.35));
      border: 1px solid rgba(255,255,255,.18);
      box-shadow: var(--shadow2);
      display: grid;
      place-items: center;
      backdrop-filter: blur(var(--blur));
    }
    .mark svg{ opacity: .95; }
    h1{
      margin: 8px 0 6px;
      font-size: clamp(34px, 5vw, 62px);
      letter-spacing: .02em;
      line-height: 1.05;
    }
    .subtitle{
      margin: 0 0 18px;
      color: rgba(77,227,255,.85);
      letter-spacing: .35em;
      text-transform: uppercase;
      font-size: 13px;
    }
    .lead{
      margin: 0 0 20px;
      color: var(--muted);
      font-size: 16px;
      line-height: 1.55;
      max-width: 60ch;
    }

    /* Botones */
    .actions{ display: flex; gap: 10px; flex-wrap: wrap; }
    .btn{
      display: inline-flex;
      align-items: center;
      gap: 10px;
      padding: 11px 14px;
      border-radius: 14px;
      border: 1px solid var(--border);
      background: rgba(255,255,255,.06);
      color: var(--text);
      cursor: pointer;
      text-decoration: none;
      user-select: none;
      backdrop-filter: blur(var(--blur));
      box-shadow: 0 10px 24px rgba(0,0,0,.30);
      transition: transform .15s ease, background .15s ease, border-color .15s ease;
    }
    .btn:hover{ transform: translateY(-1px); background: rgba(255,255,255,.09); border-color: var(--border2); }
    .btn.primary{
      background: linear-gradient(135deg, rgba(77,227,255,.18), rgba(124,92,255,.18));
      border-color: rgba(77,227,255,.22);
    }
    .btn.small{ padding: 9px 12px; border-radius: 12px; font-size: 14px; }

    /* Tarjetas */
    .grid{
      margin-top: 18px;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 14px;
    }
    @media (max-width: 900px){
      .grid{ grid-template-columns: 1fr; }
    }

    .card{
      border-radius: var(--radius2);
      background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.05));
      border: 1px solid var(--border);
      box-shadow: var(--shadow);
      backdrop-filter: blur(var(--blur));
      padding: 16px;
      position: relative;
      overflow: hidden;
    }
    .card::before{
      content:"";
      position: absolute;
      inset: 0;
      background: radial-gradient(800px 300px at 20% 0%, rgba(77,227,255,.10), transparent 55%),
                  radial-gradient(600px 260px at 90% 15%, rgba(124,92,255,.10), transparent 60%);
      opacity: .9;
      pointer-events: none;
    }
    .card > *{ position: relative; }

    .card h2{
      margin: 0 0 10px;
      font-size: 16px;
      letter-spacing: .08em;
      text-transform: uppercase;
      color: rgba(255,255,255,.85);
    }

    .kv{
      display: grid;
      grid-template-columns: 140px 1fr;
      gap: 8px 12px;
      align-items: start;
      margin-top: 8px;
    }
    @media (max-width: 520px){
      .kv{ grid-template-columns: 1fr; }
    }
    .k{ color: var(--muted2); font-size: 13px; text-transform: uppercase; letter-spacing: .12em; }
    .v{ color: var(--text); font-size: 15px; line-height: 1.45; }

    code, .code{
      background: rgba(255,255,255,.08);
      border: 1px solid rgba(255,255,255,.10);
      padding: 3px 8px;
      border-radius: 12px;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
      font-size: 13px;
      color: rgba(255,255,255,.90);
      word-break: break-all;
    }

    .pill{
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: rgba(255,255,255,.06);
      font-size: 13px;
      color: rgba(255,255,255,.86);
    }
    .dot{
      width: 8px; height: 8px;
      border-radius: 99px;
      background: rgba(255,255,255,.55);
      box-shadow: 0 0 0 4px rgba(255,255,255,.08);
    }
    .pill.ok{ background: var(--good); border-color: var(--ok-border); }
    .pill.ok .dot{ background: rgba(77,227,255,.95); box-shadow: 0 0 0 4px rgba(77,227,255,.12); }
    .pill.bad{ background: var(--bad); border-color: var(--bad-border); }
    .pill.bad .dot{ background: rgba(255,110,110,.95); box-shadow: 0 0 0 4px rgba(255,110,110,.12); }

    .muted{ color: var(--muted); }

    .row{
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      align-items: center;
      margin-top: 12px;
    }

    /* Players */
    .players{
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 10px;
    }
    .player{
      display: inline-flex;
      align-items: center;
      gap: 10px;
      padding: 8px 10px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.18);
      backdrop-filter: blur(10px);
    }
    .avatar{
      width: 28px; height: 28px;
      border-radius: 10px;
      border: 1px solid rgba(255,255,255,.18);
      box-shadow: 0 6px 18px rgba(0,0,0,.35);
      image-rendering: pixelated; /* queda muy minecraft */
    }
    .player span{ font-size: 14px; color: rgba(255,255,255,.88); }

    /* Lists */
    ul{ margin: 8px 0 0 18px; color: rgba(255,255,255,.84); }
    li{ margin: 5px 0; }
    .tiny{ font-size: 12px; color: var(--muted2); line-height: 1.45; }

    footer{
      margin-top: 26px;
      padding: 16px 4px 0;
      color: var(--muted2);
      display: flex;
      justify-content: space-between;
      gap: 12px;
      flex-wrap: wrap;
    }
    .hr{
      height: 1px;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,.14), transparent);
      margin-top: 18px;
    }
  </style>
</head>

<body>
  <div class="bg">
    <div class="blob b1"></div>
    <div class="blob b2"></div>
    <div class="blob b3"></div>
  </div>

  <div class="wrap">
    <!-- HERO -->
    <section class="hero">
      <div>
        <div class="brand">
          <div class="mark" aria-hidden="true">
            <!-- iconito simple (sin logo) -->
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none">
              <path d="M12 2c-3.6 0-6.5 2.9-6.5 6.5 0 1.9.8 3.6 2.1 4.7-.2.7-.8 1.3-1.6 1.5-.5.1-.6.8-.1 1 1.6.6 3.4.2 4.6-.9.5.1 1 .1 1.5.1 3.6 0 6.5-2.9 6.5-6.5S15.6 2 12 2Z"
                    stroke="rgba(255,255,255,.92)" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M13 6l-2 5h3l-2 5" stroke="rgba(255,255,255,.92)" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          <div>
            <div class="subtitle">Getxoko abertzaleak</div>
          </div>
        </div>

        <h1>Merengoness</h1>
        <p class="lead">
          Server privado para colegas. Entra, construye, y no rompas nada üòà
          Aqu√≠ tienes IP, estado, seed y un modpack opcional de cliente para ir fino (optimizaci√≥n + shaders/texturas).
        </p>

        <div class="actions">
          <button class="btn primary" id="copyBtn">Copiar IP</button>
          <button class="btn" id="refreshBtn">Refrescar estado</button>
          <a class="btn" id="discordBtn" href="#" target="_blank" rel="noopener">Discord</a>
          <a class="btn" id="modpackBtn" href="#" target="_blank" rel="noopener">Descargar modpack (opcional)</a>
        </div>
      </div>

      <!-- Estado compacto en hero -->
      <div class="card">
        <h2>Estado</h2>
        <div class="row">
          <span id="statusPill" class="pill"><span class="dot"></span>Comprobando‚Ä¶</span>
          <span class="tiny" id="lastCheck">‚Äî</span>
        </div>
        <div class="kv" style="margin-top:12px;">
          <div class="k">Jugadores</div>
          <div class="v"><span id="playersCount">‚Äî</span></div>

          <div class="k">MOTD</div>
          <div class="v muted" id="motd">‚Äî</div>
        </div>

        <div style="margin-top: 10px;">
          <div class="k" style="margin-bottom:8px;">Online ahora</div>
          <div class="players" id="playersList">
            <span class="muted">‚Äî</span>
          </div>
        </div>

        <div class="tiny" style="margin-top:12px;">
          *El navegador no puede ‚Äúpinguear‚Äù el puerto 25565 directamente; por eso se usa un servicio p√∫blico de status.
        </div>
      </div>
    </section>

    <!-- GRID -->
    <section class="grid">
      <div class="card">
        <h2>Conexi√≥n</h2>
        <div class="kv">
          <div class="k">Dominio</div>
          <div class="v"><span class="code" id="addr">‚Äî</span></div>

          <div class="k">Puerto</div>
          <div class="v"><span class="code" id="port">‚Äî</span> <span class="tiny">(normalmente no hace falta escribirlo)</span></div>

          <div class="k">Direcci√≥n completa</div>
          <div class="v"><span class="code" id="fullAddr">‚Äî</span></div>
        </div>

        <div class="row">
          <button class="btn small primary" id="copyBtn2">Copiar direcci√≥n</button>
          <button class="btn small" id="copySeedBtn">Copiar seed</button>
        </div>
      </div>

      <div class="card">
        <h2>Info del server</h2>
        <div class="kv">
          <div class="k">Versi√≥n</div>
          <div class="v"><span class="code" id="version">‚Äî</span></div>

          <div class="k">Software</div>
          <div class="v"><span class="code" id="software">‚Äî</span> <span class="tiny">(sin mods en servidor)</span></div>

          <div class="k">Seed</div>
          <div class="v"><span class="code" id="seed">‚Äî</span></div>

          <div class="k">Plugins</div>
          <div class="v" id="plugins">‚Äî</div>
        </div>
      </div>

      <div class="card">
        <h2>Modpack (opcional)</h2>
        <p class="muted" style="margin:0 0 8px;">
          El servidor es vanilla/Paper (sin mods). Este pack es solo para el cliente: optimizaci√≥n + (opcional) shaders/texturas.
        </p>
        <ul>
          <li>‚úÖ No es obligatorio</li>
          <li>üöÄ Mejor FPS / menos stutter</li>
          <li>‚ú® Shaders y resource pack opcionales</li>
        </ul>
        <div class="row">
          <a class="btn primary" id="modpackBtn2" href="#" target="_blank" rel="noopener">Descargar</a>
          <a class="btn" id="modrinthBtn" href="#" target="_blank" rel="noopener">Ver en Modrinth</a>
        </div>
        <div class="tiny" style="margin-top:10px;">
          Tip: si lo haces con Modrinth App, pon aqu√≠ el enlace al proyecto o un .mrpack.
        </div>
      </div>

      <div class="card">
        <h2>Reglas</h2>
        <ul>
          <li>Se buena persona.</li>
          <li>No griefing.</li>
          <li>Pide permiso antes de invitar a alguien nuevo.</li>
        </ul>
        <div class="hr"></div>
        <div class="tiny" style="margin-top: 12px;">
          Nota: si quieres ocultar lista de jugadores en la respuesta del status, se puede (pero para amigos mola mostrarlo).
        </div>
      </div>
    </section>

    <footer>
      <div>Merengoness ‚Ä¢ <span class="muted">Minecraft server</span></div>
      <div>Made by <strong style="color: rgba(255,255,255,.82);">Xanet Zaldua</strong> ¬© <span id="year"></span></div>
    </footer>
  </div>

  <script>
    /***********************
     * CONFIG ‚Äî CAMBIA ESTO
     ***********************/
    const MC_DOMAIN   = "ziaranas.synology.me";   // ej: mc.ziaranas.synology.me
    const MC_PORT     = 25565;                    // si no es 25565, pon el tuyo
    const MC_VERSION  = "1.xx.x";                 // pon tu versi√≥n real (ej: 1.21.1)
    const MC_SOFTWARE = "Paper";                  // Paper / Purpur / Vanilla, etc.
    const WORLD_SEED  = "pon_aqui_tu_seed";       // seed del mundo

    const DISCORD_URL = "https://discord.gg/XXXX"; // pon tu enlace real
    // Puedes usar: enlace a Modrinth project, o directo a un .mrpack
    const MODPACK_DOWNLOAD_URL = "https://modrinth.com/modpack/TU_MODPACK"; // o un .mrpack
    const MODPACK_MODRINTH_URL = "https://modrinth.com/modpack/TU_MODPACK";

    // Lista de plugins (si no hay, d√©jalo vac√≠o)
    const PLUGINS = [
      // "Dynmap",
      // "EssentialsX",
      // "LuckPerms",
    ];

    /***********************
     * STATUS API
     ***********************/
    const MC_CONNECT = (MC_PORT === 25565) ? MC_DOMAIN : `${MC_DOMAIN}:${MC_PORT}`;
    const STATUS_API = (addr) => `https://api.mcsrvstat.us/2/${encodeURIComponent(addr)}`;
    // Heads: servicio simple para avatar/cabeza
    const HEAD_URL = (name) => `https://mc-heads.net/avatar/${encodeURIComponent(name)}/32`;

    /***********************
     * DOM
     ***********************/
    const $ = (id) => document.getElementById(id);

    $("addr").textContent = MC_DOMAIN;
    $("port").textContent = MC_PORT;
    $("fullAddr").textContent = MC_CONNECT;

    $("version").textContent = MC_VERSION;
    $("software").textContent = MC_SOFTWARE;
    $("seed").textContent = WORLD_SEED;

    $("discordBtn").href = DISCORD_URL;
    $("modpackBtn").href = MODPACK_DOWNLOAD_URL;
    $("modpackBtn2").href = MODPACK_DOWNLOAD_URL;
    $("modrinthBtn").href = MODPACK_MODRINTH_URL;

    $("plugins").innerHTML = (PLUGINS.length === 0)
      ? `<span class="muted">Ninguno (por ahora).</span>`
      : PLUGINS.map(p => `<span class="code" style="margin-right:8px; display:inline-block; margin-bottom:8px;">${escapeHtml(p)}</span>`).join("");

    $("year").textContent = new Date().getFullYear();

    // Copy buttons
    $("copyBtn").addEventListener("click", () => copyText(MC_CONNECT, $("copyBtn")));
    $("copyBtn2").addEventListener("click", () => copyText(MC_CONNECT, $("copyBtn2")));
    $("copySeedBtn").addEventListener("click", () => copyText(WORLD_SEED, $("copySeedBtn")));
    $("refreshBtn").addEventListener("click", loadStatus);

    function setStatus(text, ok){
      const pill = $("statusPill");
      pill.className = "pill " + (ok ? "ok" : "bad");
      pill.innerHTML = `<span class="dot"></span>${escapeHtml(text)}`;
    }

    function setLastCheck(){
      $("lastCheck").textContent = `√öltima comprobaci√≥n: ${new Date().toLocaleString()}`;
    }

    function renderPlayers(list){
      const box = $("playersList");
      box.innerHTML = "";
      if (!list || list.length === 0){
        box.innerHTML = `<span class="muted">No hay nadie online.</span>`;
        return;
      }

      for (const name of list){
        const el = document.createElement("div");
        el.className = "player";
        el.innerHTML = `
          <img class="avatar" src="${HEAD_URL(name)}" alt="${escapeHtml(name)} head" loading="lazy" />
          <span>${escapeHtml(name)}</span>
        `;
        box.appendChild(el);
      }
    }

    async function loadStatus(){
      setStatus("Comprobando‚Ä¶", true);
      $("playersCount").textContent = "‚Äî";
      $("motd").textContent = "‚Äî";
      $("playersList").innerHTML = `<span class="muted">‚Äî</span>`;

      try{
        const res = await fetch(STATUS_API(MC_CONNECT), { cache: "no-store" });
        const data = await res.json();

        if (!data.online){
          setStatus("Offline", false);
          $("playersCount").textContent = "0";
          $("motd").textContent = "‚Äî";
          $("playersList").innerHTML = `<span class="muted">‚Äî</span>`;
          setLastCheck();
          return;
        }

        setStatus("Online", true);

        const online = data.players?.online ?? 0;
        const max    = data.players?.max ?? "?";
        $("playersCount").textContent = `${online} / ${max}`;

        // MOTD (a veces viene como array clean)
        const motd = (data.motd?.clean && Array.isArray(data.motd.clean))
          ? data.motd.clean.join(" ")
          : (data.motd?.clean ?? data.motd?.raw ?? "‚Äî");
        $("motd").textContent = motd || "‚Äî";

        // Player list puede no venir (depende del server / configuraci√≥n)
        const list = data.players?.list ?? [];
        if (data.players && Array.isArray(data.players.list)){
          renderPlayers(list);
        } else {
          $("playersList").innerHTML = `<span class="muted">La lista de jugadores no est√° disponible (server/status no la expone).</span>`;
        }

        setLastCheck();
      } catch(e){
        setStatus("Status no disponible", false);
        $("playersList").innerHTML = `<span class="muted">No se pudo consultar el status (API ca√≠da / red / CORS).</span>`;
        setLastCheck();
      }
    }

    function escapeHtml(str){
      return String(str).replace(/[&<>"']/g, s => ({
        "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"
      }[s]));
    }

    async function copyText(text, btn){
      try{
        await navigator.clipboard.writeText(text);
        const prev = btn.textContent;
        btn.textContent = "Copiado ‚úì";
        setTimeout(() => btn.textContent = prev, 1100);
      }catch{
        alert("No pude copiar autom√°ticamente. Copia manualmente: " + text);
      }
    }

    // Auto-load + auto-refresh
    loadStatus();
    setInterval(loadStatus, 60000);
  </script>
</body>
</html>
